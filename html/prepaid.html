<!DOCTYPE html>
<html lang="">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="csrf-param" content="_csrf-frontend">
  <meta name="csrf-token" content="9KbQKGBaz3NrMQ3liXwYWk6WkgEf5raA6c-6coqnME3PMcFVP092_qbGqN2tYGypDTzSB-2Zhr074Le4DZpLng==">
  <link rel='icon' href='../img/icon.png' type='image/x-ico' />
  <link rel="stylesheet" href="../css/base.css?version=2.8.0-alpha">
  <title>prepaid</title>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112306571-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-112306571-1');
  </script>
  <script src="../js/jquery.js?version=2.8.0-alpha"></script>
  <script src="../js/md5.js?version=2.8.0-alpha"></script>
  <script src="../js/require2.3.5.min.js?version=2.8.0-alpha"></script>
  <style>
    .body {
      line-height: 1;
    }

    .body {
      float: left;
      width: 100%;
      border-top: 1px solid #72aef0;
    }

    .nav {
      float: left;
      width: 402px;
      border: 1px solid #0076F7;
      margin-top: 100px;
      margin-bottom: 100px;
    }

    .nav__item {
      float: left;
      width: 200px;
      height: 50px;
      line-height: 50px;
      text-align: center;
      cursor: pointer;
    }

    .nav__item_active {
      background-color: #0076F7;
      color: #fff;
    }

    .title {
      float: left;
      width: 100%;
      margin-bottom: 30px;
    }

    .title__no {
      height: 18px;
      line-height: 18px;
      width: 18px;
      font-size: 16px;
      text-align: center;
      color: #fff;
      background-color: #0076F7;
      border-radius: 100%;
    }

    .title__text {
      font-size: 18px;
      color: #0076F7;
      font-weight: 700;
      padding-top: 1px;
    }

    .leftitem {
      float: left;
      width: 100%;
    }

    .leftitem__main {
      float: left;
      width: 100%;
      margin-bottom: 20px;
    }

    .leftitem__main-left {
      float: left;
      width: 230px;
      height: 50px;
      border: 2px solid #ccc;
      padding-top: 3px;
      padding-left: 5px;
    }

    .leftitem__m-l-input {
      font-size: 18px;
      width: 100%;
      color: #666;
      padding: 10px;
    }

    .leftitem__m-l-input::-webkit-input-placeholder {
      color: #d0d0d0;
      font-size: 18px;
    }

    .leftitem__main-right {
      float: left;
      width: 900px;
      padding-left: 20px;
    }

    .leftitem__m-r-img {
      float: left;
      height: 50px;
    }

    .leftitem__m-r-text {
      float: left;
      width: 700px;
      color: #ccc;
      padding-top: 5px;
      padding-left: 20px;
      line-height: 1.5;
    }

    .rightitem__prepaid {
      float: left;
      width: 100%;
      margin-bottom: 60px;
    }

    .rightitem__prepaid-item {
      float: left;
      width: 150px;
      margin-bottom: 30px;
      margin-right: 50px;
      cursor: pointer;
    }

    .rightitem__p-r-img {
      height: 50px;
      width: 150px;
      border: 2px solid #f5f5f5;
      margin-bottom: 10px;
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
    }

    .rightitem__p-r-img:hover {
      border-color: #999;
    }

    .rightitem__prepaid-item_active .rightitem__p-r-img {
      border-color: #147af3;
    }

    .rightitem__p-r-text {
      text-align: center;
      font-size: 12px;
      color: #999;
    }

    .leftitem__tips {
      float: left;
      width: 100%;
      height: 12px;
      font-size: 12px;
      color: #FD5147;
      margin-bottom: 100px;
      opacity: 0;
    }

    .leftitem__tips_show {
      opacity: 1;
    }

    .leftitem__tips-icon {
      height: 12px;
      width: 12px;
      color: #FD5147;
      margin-right: 1px;
    }

    .leftitem__denomination {
      float: left;
      width: 100%;
      margin-bottom: 70px;
    }

    .leftitem__payway {
      float: left;
      width: 100%;
      margin-bottom: 100px;
    }

    .rightitem__number {
      float: left;
      width: 100%;
      margin-bottom: 100px;
    }

    .rightitem__n-text {
      font-size: 18px;
      color: #999;
      padding-top: 5px;
    }

    .rightitem__number-select {
      height: 27px;
      width: 100px;
      border: 1px solid #aaa;
      /* color: #0076F7; */
      font-size: 14px;
    }

    .leftitem__d-item {
      float: left;
      position: relative;
      width: 150px;
      height: 50px;
      border: 2px solid #f5f5f5;
      color: #999;
      margin-right: 50px;
      margin-bottom: 30px;
      overflow: hidden;
    }

    .leftitem__d-item:hover {
      border-color: #999;
      cursor: pointer;
    }

    .leftitem__d-i-price {
      float: left;
      width: 90px;
      font-size: 18px;
      text-align: right;
      padding-top: 15px;
    }

    .leftitem__d-i-unit {
      float: left;
      width: 40px;
      font-size: 12px;
      padding-top: 20px;
      padding-left: 5px;
      text-align: left;
    }

    .leftitem__d-i-arrow {
      position: absolute;
      display: none;
      bottom: -5px;
      right: -5px;
      height: 10px;
      width: 10px;
      background-color: #0076F7;
      -webkit-transform: rotate(-45deg);
      transform: rotate(-45deg);
    }

    .leftitem__d-item_active {
      color: #0076F7;
      border-color: #0076F7 !important;
    }

    .leftitem__d-item_active .leftitem__d-i-arrow {
      display: block;
    }

    .rightitem .leftitem__denomination {
      margin-bottom: 15px;
    }

    .price {
      float: left;
      width: 100%;
      margin-bottom: 30px;
    }

    .price__title {
      font-size: 14px;
      color: #333;
      margin-bottom: 20px;
      font-weight: 700;
    }

    .price__money-number {
      float: left;
      color: #FD5147;
      font-size: 24px;
      margin-right: 45px;
      font-weight: 700;
    }

    .price__money-discounts {
      float: left;
      padding-top: 5px;
      font-size: 14px;
      color: #999;
    }

    .submit {
      float: left;
      width: 300px;
      height: 60px;
      line-height: 60px;
      text-align: center;
      /* background-color: #ccc; */
      background-color: rgba(0, 118, 247, .5);
      color: #fff;
      margin-bottom: 100px;
      font-size: 18px;
      cursor: not-allowed;
    }

    .submit_acitve {
      background-color: #0076F7;
      cursor: pointer;
    }

    .submit_acitve:active {
      background-color: #0056d7;
    }

    .prepaid-confirm {
      position: fixed;
      top: 0;
      bottom: 0;
      right: 0;
      left: 0;
      z-index: 123456;
      background-color: rgba(0, 0, 0, .3);
      text-align: center;
      padding-top: 10%;
    }

    .prepaid-confirm__main {
      display: inline-block;
      width: 1000px;
      height: 441px;
      background-color: #fff;
      padding-right: 50px;
      padding-left: 50px;
      text-align: center;
    }

    .prepaid-confirm__main-close {
      text-align: right;
      margin-top: 50px;
      margin-bottom: 70px;
    }

    .prepaid-confirm__m-c-icon {
      display: inline-block;
      height: 16px;
      width: 16px;
      cursor: pointer;
      background-repeat: no-repeat;
      background-position: center;
      background-size: contain;
      background-image: url(../img/close.png);
    }

    .prepaid-confirm__main-text {
      font-size: 18px;
      color: #ccc;
      margin-bottom: 20px;
    }

    .prepaid-confirm__main-number {
      font-size: 36px;
      margin-bottom: 75px;
    }

    .prepaid-confirm__main-button {
      display: inline-block;
      height: 60px;
      line-height: 60px;
      width: 300px;
      text-align: center;
      color: #fff;
      background-color: #147af3;
      font-size: 16px;
      cursor: pointer;
    }

    .prepaid-confirm__main-button:active {
      background-color: #045ac3;
    }
  </style>
</head>

<body>
  <div class="content" id="vue-el">
    <header class="header" id="header"></header>
    <div class="body__main" :style="{ 'min-height': body__main_height + 'px' }">
      <div class="body">
        <section class="nav">
          <div class="nav__item" :class="{ 'nav__item_active': type === 'recharge' }" @click="type = 'recharge'">Nạp tiền</div>
          <div class="nav__item" :class="{ 'nav__item_active': type === 'scratchCards' }" @click="type = 'scratchCards'">Thẻ Cào</div>
        </section>
        <section class="leftitem" v-show="type === 'recharge'">
          <section class="title">
            <span class="title__no">1</span>
            <span class="title__text">Điền số điện thoại di động</span>
          </section>
          <div class="leftitem__main">
            <div class="leftitem__main-left">
              <input type="tel" class="leftitem__m-l-input" maxlength="11" v-model="telNumber" placeholder="Số di động của bạn" oninput="/^[0-9]*$/.test(this.value) ? this.setAttribute('data-on-val', this.value) : this.value = this.getAttribute('data-on-val');"
                data-on-val="">
            </div>
            <div class="leftitem__main-right">
              <img alt="logo" src="" class="leftitem__m-r-img" v-show="recharge_providerImg" :src="recharge_providerImg" style="display: none;">
              <div class="leftitem__m-r-text">Lưu ý: Thuê bao bị khóa chiều nạp tiền (sim bị khóa 2 chiều, sim bị khóa do nhập sai mã thẻ điện thoại trước
                đó nhiều lần, ...) sẽ không thể thực hiện được dịch vụ này.</div>
            </div>
          </div>
          <div class="leftitem__tips" :class="{ 'leftitem__tips_show': telNumberError === true }">
            <img class="leftitem__tips-icon" src="../img/alert-prepaid.svg" alt="tips">
            <span v-html="telNumberErrorText"></span>
          </div>
          <section class="title">
            <span class="title__no">2</span>
            <span class="title__text">选择充值面额</span>
          </section>
          <div class="leftitem__denomination">
            <li class="leftitem__d-item" v-for="(val, key) in recharge_prepaid" @click="recharge_selected = key" :class="{ 'leftitem__d-item_active': key === recharge_selected }">
              <div class="leftitem__d-i-price" v-html="priceFormat(val.price)"></div>
              <div class="leftitem__d-i-unit">VND</div>
              <div class="leftitem__d-i-arrow"></div>
            </li>
          </div>
          <section class="title">
            <span class="title__no">3</span>
            <span class="title__text">Phương thức thanh toán</span>
          </section>
          <div class="leftitem__payway">
            <div class="payway__m-b-item" @click="recharge_payway = '2'" :class="{ 'payway__m-b-item_acitve': recharge_payway === '2' }">
              <div class="payway__m-b-i-text">Ngân hàng</div>
              <div class="payway__m-b-i-icon">
                <span class="payway__m-b-i-icon-img" style="background-image: url(../img/pay_epay.png);"></span>
              </div>
              <div class="payway__m-b-i-indicator">
                <span class="payway__m-b-i-i-img"></span>
              </div>
            </div>
            <div class="payway__m-b-item" @click="recharge_payway = '1'" :class="{ 'payway__m-b-item_acitve': recharge_payway === '1' }">
              <div class="payway__m-b-i-text">Số dư</div>
              <div class="payway__m-b-i-icon">
                <span class="payway__m-b-i-icon-img" style="background-image: url(../img/pay_balance.png);"></span>
              </div>
              <div class="payway__m-b-i-indicator">
                <span class="payway__m-b-i-i-img"></span>
              </div>
            </div>
          </div>
          <sectoin class="price">
            <div class="price__title">Tổng tiền</div>
            <div class="price__money">
              <div class="price__money-number" v-html="priceFormat(recharge_price) + 'VND'"></div>
              <div class="price__money-discounts" v-html="'(Tiết kiệm: ' + recharge_orgPrice + ' VND)'" v-show="recharge_price < recharge_orgPrice"></div>
            </div>
          </sectoin>
          <section class="submit" @click="(recharge_invalid && recharge_fling && recharge_price > 0) && (prepaid_confirm_show = true)"
            :class="{ 'submit_acitve': recharge_invalid && recharge_fling && recharge_price > 0 }">Thanh toán</section>
        </section>
        <section class="rightitem" v-show="type === 'scratchCards'">
          <section class="title">
            <span class="title__no">1</span>
            <span class="title__text">Chọn nhà mạng</span>
          </section>
          <div class="rightitem__prepaid">
            <li class="rightitem__prepaid-item" v-for="(val, key) in scratchCards_result" @click="scratchCards_providerIndex = key" :class="{ 'rightitem__prepaid-item_active': scratchCards_providerIndex === key }">
              <div class="rightitem__p-r-img" :style="{ 'background-image': 'url('+ val.providerIcon +')'}"></div>
              <div class="rightitem__p-r-text" v-html="val.providerName"></div>
            </li>
          </div>
          <section class="title">
            <span class="title__no">2</span>
            <span class="title__text">Chọn mệnh giá và số lượng thẻ</span>
          </section>
          <div class="leftitem__denomination">
            <li class="leftitem__d-item" v-for="(val, key) in scratchCards_faceValues" @click="scratchCards_selectedIndex = key" :class="{ 'leftitem__d-item_active': key === scratchCards_selectedIndex }">
              <div class="leftitem__d-i-price" v-html="priceFormat(val.orgPrice)"></div>
              <div class="leftitem__d-i-unit">VND</div>
              <div class="leftitem__d-i-arrow"></div>
            </li>
          </div>
          <div class="rightitem__number">
            <span class="rightitem__n-text">Số lượng thẻ: </span>
            <select name="" class="rightitem__number-select" v-model="scratchCards_number">
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
              <option value="6">6</option>
              <option value="7">7</option>
              <option value="8">8</option>
              <option value="9">9</option>
              <option value="10">10</option>
            </select>
          </div>
          <section class="title">
            <span class="title__no">3</span>
            <span class="title__text">Phương thức thanh toán</span>
          </section>
          <div class="leftitem__payway">
            <div class="payway__m-b-item" @click="scratchCards_payway = '2'" :class="{ 'payway__m-b-item_acitve': scratchCards_payway === '2' }">
              <div class="payway__m-b-i-text">Ngân hàng</div>
              <div class="payway__m-b-i-icon">
                <span class="payway__m-b-i-icon-img" style="background-image: url(../img/pay_epay.png);"></span>
              </div>
              <div class="payway__m-b-i-indicator">
                <span class="payway__m-b-i-i-img"></span>
              </div>
            </div>
            <div class="payway__m-b-item" @click="scratchCards_payway = '1'" :class="{ 'payway__m-b-item_acitve': scratchCards_payway === '1' }">
              <div class="payway__m-b-i-text">Số dư</div>
              <div class="payway__m-b-i-icon">
                <span class="payway__m-b-i-icon-img" style="background-image: url(../img/pay_balance.png);"></span>
              </div>
              <div class="payway__m-b-i-indicator">
                <span class="payway__m-b-i-i-img"></span>
              </div>
            </div>
          </div>
          <sectoin class="price">
            <div class="price__title">Tổng tiền</div>
            <div class="price__money">
              <div class="price__money-number" v-html="priceFormat(scratchCards_totalPrice) + 'VND'"></div>
              <div class="price__money-discounts" v-html="'(Tiết kiệm: ' + priceFormat(scratchCards_totalOrgPrice - scratchCards_totalPrice) + ' VND)'"
                v-show="scratchCards_price < scratchCards_orgPrice"></div>
            </div>
          </sectoin>
          <section class="submit" @click="scratchCards_submit" :class="{ 'submit_acitve': scratchCards_productInfoId && scratchCards_price > 0 }">Thanh toán</section>
        </section>
        <section class="prepaid-confirm" style="display: none;" v-show="prepaid_confirm_show">
          <div class="prepaid-confirm__main">
            <div class="prepaid-confirm__main-close">
              <div class="prepaid-confirm__m-c-icon" @click="prepaid_confirm_show = false"></div>
            </div>
            <div class="prepaid-confirm__main-text">请确认充值手机号</div>
            <div class="prepaid-confirm__main-number" v-html="telNumber"></div>
            <div class="prepaid-confirm__main-button" @click="recharge_submit">Xác nhận thanh toán</div>
          </div>
        </section>
      </div>
    </div>
    <footer class="footer" id="footer"></footer>
  </div>
  <script>
    require([
      '../js/jquery1.11.2.js?version=2.8.0-alpha',
      '../js/vue.min.js?version=2.8.0-alpha',
      '../js/md5.js?version=2.8.0-alpha',
      '../js/common.js?version=2.8.0-alpha',
    ], function ($, Vue, md5) {
      var loading = new F._loading();

      F.def_recharge_prepaid = [{ orgPrice: 50000, price: 50000 }, { orgPrice: 100000, price: 100000 }, { orgPrice: 200000, price: 200000 }, { orgPrice: 300000, price: 300000 }, { orgPrice: 500000, price: 500000 }];

      F.vue = {
        body__main_height: document.documentElement.clientHeight - 133 - 210 - 210,
        type: 'recharge', // scratchCards: 刮刮卡; recharge: 电话充值
        telNumber: '',
        telNumberError: false,
        telNumberErrorText: '您所填入的手机号的手机号不支持直冲，请选择充值卡充值/请输入正确的手机号',
        telNumberJudgeSetTimeoutId: 0,
        recharge_result: {},
        recharge_providerImg: '',
        recharge_prepaid: F.def_recharge_prepaid,
        recharge_selected: -1,
        recharge_price: 0, // 现价
        recharge_orgPrice: 0, // 原价
        recharge_fling: false, // 电话号码是否支持直冲
        recharge_invalid: false, // 电话号码是否有效
        recharge_payway: '2',
        recharge_productInfoId: 0, // 商品id
        prepaid_confirm_show: false,
        scratchCards_result: [],
        providersValue_result: {},
        scratchCards_providerIndex: -1,
        scratchCards_selectedIndex: -1,
        scratchCards_faceValues: [],
        scratchCards_providersCard_item: {},
        scratchCards_providersValue_item: {},
        scratchCards_number: 1, // 数量
        scratchCards_price: 0, // 现价
        scratchCards_orgPrice: 0, // 原价
        // scratchCards_totalPrice: 0, // 现价*数量
        // scratchCards_totalOrgPrice: 0, // 原价*数量
        scratchCards_productInfoId: 0, // 商品id
        scratchCards_payway: '2',
      };

      var load = function () {
        new_vue();
      };

      var pre_data = function (data) {
        console.log(data);
        F.vue.scratchCards_result = data._getProvidersCard;
        // F.vue.providersValue_result = data._getProvidersValue;
      }

      F.loadData = function (params, callback) {
        if (callback === undefined) callback = params;

        var all_data = {};
        var request_length = 1; //请求个数

        // 请求是否全部返回
        function all_loaded() {
          if (Object.keys(all_data).length === request_length) {
            pre_data(all_data);
            loading.hide();
            callback(all_data);
          }
        }
        loading.show();

        F._getProvidersCard({}, function (ret) {
          all_data._getProvidersCard = ret.result;
          all_loaded();
        });
      };

      function new_vue() {
        F.vue = new Vue({
          el: $('#vue-el')[0],
          data: F.vue,
          methods: {
            priceFormat: F._priceFormat,
            recharge_submit: recharge_submit,
            scratchCards_submit: scratchCards_submit,
          },
          computed: {
            scratchCards_totalPrice: function () {
              return this.scratchCards_price * this.scratchCards_number;
            },
            scratchCards_totalOrgPrice: function () {
              return this.scratchCards_orgPrice * this.scratchCards_number;
            },
          },
          mounted: function () {
            F.vue.recharge_selected = 0;
            F.vue.scratchCards_providerIndex = 0;
          },
          watch: {
            scratchCards_selectedIndex: function (val, oldVal) {
              F.vue.scratchCards_providersValue_item = F.vue.scratchCards_faceValues[val];
              F.vue.scratchCards_price = F.vue.scratchCards_providersValue_item.price;
              F.vue.scratchCards_orgPrice = F.vue.scratchCards_providersValue_item.orgPrice;
              F.vue.scratchCards_productInfoId = F.vue.scratchCards_providersValue_item.id;
            },
            scratchCards_providerIndex: function (val, oldVal) {
              F.vue.scratchCards_providersCard_item = F.vue.scratchCards_result[val];

              // 为初始化做准备
              F.vue.scratchCards_selectedIndex = -1;
              F._getProvidersValue({
                providerName: F.vue.scratchCards_providersCard_item.providerName,
                providerCode: F.vue.scratchCards_providersCard_item.providerCode,
              }, function (ret) {
                F.vue.scratchCards_faceValues = ret.result.productInfos;
                F.vue.scratchCards_selectedIndex = 0;
              });

            },
            recharge_selected: function (val, oldVal) {
              F.vue.recharge_price = F.vue.recharge_prepaid[val].price;
              F.vue.recharge_orgPrice = F.vue.recharge_prepaid[val].orgPrice;
              F.vue.recharge_productInfoId = F.vue.recharge_prepaid[val].id;
            },
            telNumber: function (val, oldVal) {
              if (val[0] !== '0') val = '0' + val;

              function judge(val) {
                if (val.length === 10 && val.slice(0, 2) === '09') {
                  // F.vue.telNumberError = false;
                  // F.vue.telNumberErrorText = '';
                  // F.vue.recharge_invalid = true;
                  // 为了下一步初始化
                  F.vue.recharge_selected = -1;

                  F._getPhoneRecharge({
                    msisdn: val
                  }, getPhoneRecharge_callback);

                } else if (val.length === 11 && val.slice(0, 2) === '01') {
                  // F.vue.telNumberError = false;
                  // F.vue.telNumberErrorText = '';
                  // F.vue.recharge_invalid = true;
                  // 为了下一步初始化
                  F.vue.recharge_selected = -1;

                  F._getPhoneRecharge({
                    msisdn: val
                  }, getPhoneRecharge_callback);

                } else {
                  F.vue.telNumberError = true;
                  F.vue.telNumberErrorText = 'Invalid phone number';
                  F.vue.recharge_invalid = false;
                }
              }

              window.clearTimeout(F.vue.telNumberJudgeSetTimeoutId);
              F.vue.telNumberJudgeSetTimeoutId = window.setTimeout(() => {
                judge(val);
              }, 700);
            },
          },
        });
      }

      function getPhoneRecharge_callback(ret) {
        if (!ret) return false;
        if (ret.code !== 10000) return false;
        if (!ret.result.productInfos) {
          // 不支持直冲
          F.vue.recharge_fling = false;
          F.vue.recharge_result = {};
          F.vue.recharge_prepaid = F.def_recharge_prepaid;
          F.vue.recharge_providerImg = '';
          F.vue.recharge_selected = 0;

          F.vue.telNumberError = true;
          F.vue.telNumberErrorText = '不支持此手机号直冲';
          F.vue.recharge_invalid = false;
        } else {
          // 支持直冲
          F.vue.recharge_fling = true;
          F.vue.recharge_result = ret.result;
          F.vue.recharge_prepaid = ret.result.productInfos;
          F.vue.recharge_providerImg = ret.result.providerIcon;
          F.vue.recharge_selected = 0;

          F.vue.telNumberError = false;
          F.vue.telNumberErrorText = '';
          F.vue.recharge_invalid = true;
        }

      }

      function paymentDisOrder_callback(ret) {
        loading.hide();
        if (!ret) return false;
        if (ret.code !== 10000) return false;

        window.location.href = `./successPay.html?type=6&orderNo=${F.orderNo}&tradeNo=${F.tradeNo}`;
      }

      function createDisOrder_callback(ret) {
        loading.hide();

        if (!ret) return false;
        if (ret.code !== 10000) return false;
        F.orderNo = ret.orderNo;
        F.tradeNo = ret.tradeNo;

        var payway = F.vue.type === 'recharge' ? F.vue.recharge_payway : F.vue.scratchCards_payway;
        function go_pay() {
          if (payway === '1') {
            F._payPwd_open(function (paypassword) {
              loading.show();
              F._payDisOrder({
                orderno: F.orderNo,
                tradeno: F.tradeNo,
                payway: payway,
                paypassword: paypassword,
              }, paymentDisOrder_callback);
            });
          } else {
            loading.show();
            F._payDisOrder({
              orderno: F.orderNo,
              tradeno: F.tradeNo,
              payway: payway,
              paypassword: '',
            }, paymentDisOrder_callback);
          }
        }
        go_pay();
      }

      function recharge_submit() {
        if (!localStorage.getItem("funId")) {
          F._confirm('Gợi ý', 'Vui lòng đăng nhập', 'tips', [{
            name: 'Xác nhận',
            func: function () {
              window.location.href = 'login.html';
            }
          }]);
          return false;
        }

        // 延迟，修改手机号后，防止点击过快，手机号没更新
        setTimeout(() => {
          loading.show();
          F._createDisOrder({
            orderdetails: [{
              payRate: '1',
              orderNo: F._create_orderno(localStorage.getItem("funId")),
              totalAmount: F.vue.recharge_price,
              orgAmount: F.vue.recharge_orgPrice,
              advance: F.vue.recharge_price,
              currency: 'VND',
              subject: F.vue.recharge_result.providerName + ' ' + F.vue.telNumber + ' ' + F.vue.recharge_price + 'VND',
              goodsDetail: JSON.stringify([{
                number: 1,
                cartitemid: '',
                productInfoId: F.vue.recharge_productInfoId,
                account: F.vue.telNumber,
                provider: F.vue.recharge_result.providerCode,
                type: '1',
              }]),
              repaymentMonth: 0,
              couponCard: '',
              couponPassword: '',
              couponType: 0,
              couponValue: 0,
              couponBrandId: 0,
              couponTypeId: 0,
              couponProductInfoId: 0,
            }],
            ordertype: '2',
            addrid: 0,
          }, createDisOrder_callback);

        }, 300);
      }

      function scratchCards_submit() {
        if (!localStorage.getItem("funId")) {
          F._confirm('Gợi ý', 'Vui lòng đăng nhập', 'tips', [{
            name: 'Xác nhận',
            func: function () {
              window.location.href = 'login.html';
            }
          }]);
          return false;
        }

        // 延迟，修改手机号后，防止点击过快，手机号没更新
        setTimeout(() => {
          loading.show();
          F._createDisOrder({
            orderdetails: [{
              payRate: '1',
              orderNo: F._create_orderno(localStorage.getItem("funId")),
              totalAmount: F.vue.scratchCards_totalPrice,
              orgAmount: F.vue.scratchCards_totalOrgPrice,
              advance: F.vue.scratchCards_totalPrice,
              currency: 'VND',
              subject: F.vue.scratchCards_providersCard_item.providerName + ' ' + F.vue.scratchCards_totalPrice + 'VND',
              goodsDetail: JSON.stringify([{
                number: parseInt(F.vue.scratchCards_number),
                cartitemid: '',
                productInfoId: F.vue.scratchCards_productInfoId,
                account: '',
                provider: F.vue.scratchCards_providersCard_item.providerCode,
                type: '1',
              }]),
              repaymentMonth: 0,
              couponCard: '',
              couponPassword: '',
              couponType: 0,
              couponValue: 0,
              couponBrandId: 0,
              couponTypeId: 0,
              couponProductInfoId: 0,
            }],
            ordertype: '2',
            addrid: 0,
          }, createDisOrder_callback);

        }, 300);

      }

      F.loadData(function () {
        load();
      });
    })
  </script>
  <script src="https://s22.cnzz.com/z_stat.php?id=1271691056&web_id=1271691056" language="JavaScript"></script>
</body>

</html>