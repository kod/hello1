<html lang="">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="csrf-param" content="_csrf-frontend">
    <meta name="csrf-token" content="">
    <link rel='icon' href='../img/icon.png' type='image/x-ico' />
    <title>Bộ sưu tập của tôi</title>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-112306571-1"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'UA-112306571-1');
    </script>
    <link href="../css/bootstrap.css?version=2.4.0-alpha" rel="stylesheet">
    <link rel="stylesheet" href="../css/swiper.min.css?version=2.4.0-alpha">
    <link href="../css/style.css?version=2.4.0-alpha" rel="stylesheet">
    <link rel="stylesheet" href="../css/oneself.css?version=2.4.0-alpha" />
    <link href="../css/index_add_img.css?version=2.4.0-alpha" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/index_img.css?version=2.4.0-alpha">
    <link rel="stylesheet" href="../css/upload.css?version=2.4.0-alpha" />
    <link rel="stylesheet" href="../css/collection.css?version=2.4.0-alpha" />
    <link rel="stylesheet" href="../css/base.css?version=2.4.0-alpha">
    <style>
        footer {
            float: left;
        }

        #lastPagebtn {
            padding: 3px 8px;
        }

        #nextPagebtn {
            background-color: rgb(0, 117, 246);
        }
    </style>

</head>

<body ng-app="indexApp" ng-controller="collectionCtrl">
    <header class="header" id="header"></header>
    <div class="all all_nav">
        <div class="content navh" style="overflow: inherit;">
            <div class="category left" style="width:182px;height:37px;background: transparent;">
                <!--<a href="#" class="category_a"></a>-->
                <!-- <img src="../img/h.jpg" alt="" style="margin-left: -12px;width: 205px;margin-top: -12px;" /> -->
            </div>
            <div class="nav left">
                <a href="../index.html" class="">Trang chủ</a>
            </div>
            <div class="iwant right">
                <a href="bill.html" class="">Tôi muốn thanh toán nợ &gt;</a>
            </div>
        </div>
    </div>
    <!--板块-->
    <article style="position: relative; z-index: 100; min-height: 500px;">
        <div class="con">
            <div id="one" style="height:auto">
                <div class="left one-left">
                    <div class="img">
                        <img src="../img/36.png" alt="" class="img-bg" />
                        <div class="phone">
                            <img src="../img/37.png" onerror="nofind(this)" alt="" class="img-phone" data-toggle="modal" data-target="#myhead" />
                            <script type="text/javascript">
                                function nofind(img) {
                                    img.src = "../img/37.png";
                                    img.onerror = null;
                                }
                            </script>
                            <p>Chào buổi sáng！</p>
                        </div>
                    </div>
                    <ul>
                        <li class="one">
                            <a href="personal.html">Trung tâm cá nhân</a>
                        </li>
                        <li class="two">
                            <a href="oneself.html">Trung tâm an ninh</a>
                        </li>
                        <li class="three">
                            <a href="order.html">Đơn hàng của tôi</a>
                        </li>
                        <li class="four">
                            <a href="bill.html">Hóa đơn của tôi</a>
                        </li>
                        <li class="five act">
                            <a href="collection.html">Bộ sưu tập của tôi</a>
                        </li>
                        <li class="seven">
                            <a href="complaint.html">Góp ý của tôi</a>
                        </li>
                        <li class="eig">
                            <a href="address.html">Địa chỉ nhận hàng</a>
                        </li>
                    </ul>
                </div>
                <div class="right one-right">
                    <h2>Bộ sưu tập của tôi </h2>
                    <div class="collection">
                        <dl>
                            <dd ng-repeat="item in collList">
                                <a class="img" ng-click="product(item.typeId,item.brandId,item.id)" style="display: block;" target="_self">
                                    <img src="{{item.brandImage}}" alt="" />
                                </a>
                                <h5>
                                    <input type="checkbox" ng-click="chooseid(item.brandId,$event)" class="list_good list_goodone" />
                                    <input type="checkbox" ng-click="chooseids(item.brandId,$event)" class="list_good list_goodover" style="display: none;" />
                                    <span ng-bind="item.brandName"></span>
                                </h5>
                                <p ng-if="item.status === '2'" style="color: #F7004C">Đã hết hàng</p>
                                <p>
                                    <!-- Giá bán: -->
                                    <b ng-bind="item.brandPrice | priceFormat"></b>
                                </p>
                                <p>
                                    <i>
                                        <b ng-bind="item.brandPrice/12 | priceFormat"></b> VND</i> x 12 Tháng</p>
                            </dd>
                        </dl>
                        <div class="changePage">
                            <div style="margin-bottom: 30px;">
                                <button id="lastPagebtn" ng-click="lastPage(currentpage)">&lt;</button>
                                <span style="padding-top: 3px;">Trang hiện tại:
                                    <span ng-init="nowPage=1" ng-bind="nowPage" class="pop"></span>&nbsp;&nbsp;</span>
                                <span style="padding-top: 3px;">Trang :
                                    <span ng-bind="totalPage"></span> tiên</span>
                                <button id="nextPagebtn" ng-click="nextPage(currentpage)">&gt;</button>
                            </div>
                        </div>
                        <!-- <ul class="pagination" style="margin: 15px 0px;float: right;">
                            <li ng-class="{true:'disabled'}[p_current==1]">
                                <a href="javascript:void(0);" ng-click="p_index()">Trang chủ</a>
                            </li>
                            <li ng-repeat="page in pages" ng-class="{true:'active'}[p_current==page]">
                                <a href="javascript:void(0);" ng-click="load_page(page)" ng-bind="{{page}}"></a>
                            </li>
                            <li ng-class="{true:'disabled'}[p_current==p_all_page]">
                                <a href="javascript:void(0);" ng-click="p_last()">Trang cuối</a>
                            </li>
                        </ul> -->
                        <div class="over" style="margin-bottom: 30px;">
                            <input type="checkbox" id="selectAll" ng-click="overlistgood()" />
                            <label for="selectAll">Chọn hết</label>
                            <button disabled="disabled" ng-click="clearsc()" class="btns">Hủy sưu tập</button>
                            <!--<button disabled="disabled">清除已下架商品</button>-->
                            <!-- <div class="right">
                                Bạn
                                <i ng-bind="length"></i>một thông báo &nbsp;
                            </div> -->
                        </div>
                    </div>
                    <div class="no_list">
                        <img src="../img/45.jpg" alt="" />
                        <p>Bạn chưa thấy sản phẩm nào ưng ý sao? Hãy tìm kiếm ngay bây giờ!</p>
                        <a href="../index.html">Đến trang chủ >></a>
                    </div>
                </div>
            </div>
        </div>
    </article>
    <!-- 弹出模态框（更换头像） -->
    <div class="modal fade" id="myhead" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <div class="left">Cài đặt ảnh đại diện</div>
                    <div class="right" data-dismiss="modal">
                        <span class="alert__b-m-t-close"></span>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="modal_one">
                        <i class="uphead">Tải ảnh đại diện</i>
                        <span>Hỗ trợ định dạng jpg, png or bmp, kích cỡ không quá 2M</span>
                    </div>
                    <div class="modal_two" style="display: none">
                        <div class="imageBox">
                            <div class="thumbBox"></div>
                            <div class="spinner" style="display: none">Loading...</div>
                        </div>
                        <div class="action">
                            <div class="new-contentarea tc">
                                <a href="javascript:void(0)" class="upload-img">
                                    <label for="upload-file">Tải ảnh lên</label>
                                </a>
                                <input type="file" class="" name="upload-file" id="upload-file" />
                            </div>
                            <input type="button" id="btnCrop" class="Btnsty_peyton" value="Xem trước">
                            <input type="button" id="btnZoomIn" class="Btnsty_peyton" value="+">
                            <input type="button" id="btnZoomOut" class="Btnsty_peyton" value="-">
                        </div>
                        <div class="cropped"></div>
                        <div class="right">
                            <!--<i class="sure" disabled="true">Xác nhận</i>-->
                            <button type="text" class="sure" disabled="true" ng-click="uploadFiles()">Xác nhận</button>
                        </div>
                    </div>
                    <div class="modal_three" style="display: none">
                        <img src="../img/32.png" alt="" />
                        <p>Tải ảnh đại diện thành công</p>
                        <i class="success" data-dismiss="modal">Xác nhận</i>
                    </div>
                </div>
            </div>
            <!-- /.modal-content -->
        </div>
        <!-- /.modal -->
    </div>
    <footer class="footer" id="footer"></footer>
    <script src="../js/jquery.js?version=2.4.0-alpha"></script>
    <script src="../js/bootstrap.js?version=2.4.0-alpha"></script>
    <script type="text/javascript" src="../js/cropbox.js?version=2.4.0-alpha"></script>
    <script src="../js/md555.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="../js/md5.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="../js/getMd5Code.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="../js/localStorage.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="../js/angularjs.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="../js/ajax.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="../js/common.js?version=2.4.0-alpha"></script>
    <script>
        F._isLogin();

        (now = new Date()), (hour = now.getHours());
        if (hour >= 1 && hour <= 9) {
            $(".phone p").html("Chào buổi sáng！");
        } else if (hour >= 12 && hour <= 14) {
            $(".phone p").html("Chúc bạn buổi trưa vui vẻ！");
        } else if (hour >= 15 && hour <= 17) {
            $(".phone p").html("Chúc bạn buổi chiều vui vẻ！");
        } else if (hour >= 18) {
            $(".phone p").html("Chúc bạn buổi tối vui vẻ！");
        }


        $(function () {
            var a = $('.collection').html();

            if (a == '' || a == 0) {
                $('.no_list').show();
            } else {
                $('.no_list').hide();
            }
        })

        $('#selectAll').click(function () {
            if ($('#selectAll').is(':checked')) {
                $('.collection').find('input').prop('checked', true);
                $('.over button').attr('disabled', false);
            } else {
                $('.collection').find('input').prop('checked', false);
                $('.over button').attr('disabled', true);
            }

        })

        $(window).load(function () {
            var options = {
                thumbBox: '.thumbBox',
                spinner: '.spinner',
                imgSrc: '../img/37.png'
            }
            var cropper = $('.imageBox').cropbox(options);
            $('#upload-file').on('change', function () {
                var reader = new FileReader();
                reader.onload = function (e) {
                    options.imgSrc = e.target.result;
                    cropper = $('.imageBox').cropbox(options);
                }
                reader.readAsDataURL(this.files[0]);
                //this.files = [];
            })
            $('#btnCrop').on('click', function () {
                var img = cropper.getDataURL();
                $('.cropped').html('');

                $('.cropped').append('<img src="' + img + '" align="absmiddle" style="width:180px;margin-top:4px;border-radius:180px;box-shadow:0px 0px 12px #7E7E7E;" class="upimg" id="upimg"><p>180px*180px</p>');
                setTimeout(function () {
                    var img = $('.cropped').html()
                    if (img == '' || img == 0) {

                    } else {
                        $('.sure').attr('disabled', false).css('background', '#0075f6').css('color', '#fff');
                        var imgSrc = $('#upimg').attr('src');
                        upload(imgSrc);
                    }
                }, 500)
            })
            $('#btnZoomIn').on('click', function () {
                cropper.zoomIn();
            })
            $('#btnZoomOut').on('click', function () {
                cropper.zoomOut();
            })
        });

        function upload(imgSrcs) {
            var imgSrc = imgSrcs;
            var blob = dataURLtoBlob(imgSrc);

            function dataURLtoBlob(dataurl) {
                var arr = dataurl.split(','),
                    mime = arr[0].match(/:(.*?);/)[1],
                    bstr = atob(arr[1]),
                    n = bstr.length,
                    u8arr = new Uint8Array(n);
                while (n--) {
                    u8arr[n] = bstr.charCodeAt(n);
                }
                return new Blob([u8arr], {
                    type: mime
                });
            }
            $('.sure').click(function () {
                var funid = localStorage.getItem("funId");
                var formData = new FormData();
                formData.append("funid", funid);
                formData.append("files", blob, 'jpg');
                F._uploadFilesUser(formData, function (ret) {

                });
            })
        }

        $('.uphead').click(function () {
            $('.modal_one').hide();
            $('.modal_two').show();
        })



        $('.sure').click(function () {

            $('.modal_two').hide();
            $('.modal_three').show();
            var img = $('.upimg').attr('src');
            $('.img-phone').attr('src', img);
            $('.modal-header').find('.left').html('Cài đặt')

        })
        $('.success').click(function () {
            setTimeout(function () {
                $('.modal-header').find('.left').html('Cài đặt ảnh đại diện')
                $('.modal_one').show();
                $('.modal_two').hide();
                $('.modal_three').hide();

            }, 1500)
            $('#upimg').attr('src', '');
            $('#upload-file').val('');
            //window.location.href="";
        });

        // function gotoFind() {
        //     var findcontent = $("#findIpt").val();
        //     if (findcontent != "") {
        //         window.location.href = "./search.html?findcontent=" + findcontent;
        //     }
        // }

        // function entersearch() {
        //     var event = window.event || arguments.callee.caller.arguments[0];
        //     if (event.keyCode == 13) {
        //         gotoFind();
        //     }
        // }
    </script>
    <script src="../js/collection.js?version=2.4.0-alpha" type="text/javascript" charset="utf-8"></script>
    <script src="https://s22.cnzz.com/z_stat.php?id=1271691056&web_id=1271691056" language="JavaScript"></script>
</body>

</html>